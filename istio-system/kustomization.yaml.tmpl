# This file is generated by Terraform and may be overwritten!
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: istio-system

helmCharts:
- name: base
  namespace: istio-system
  releaseName: istio-base
  version: "${istio_version}"
  repo: https://istio-release.storage.googleapis.com/charts
  includeCRDs: true

%{ if istio_enable_istiod }
- name: istiod
  namespace: istio-system
  releaseName: istiod
  version: "${istio_version}"
  repo: https://istio-release.storage.googleapis.com/charts
  includeCRDs: true
  valuesFile: ./helm/istiod-values.yaml
%{ endif }

%{ if istio_enable_eastwest_gateway }
- name: gateway
  namespace: istio-system
  releaseName: eastwest-gateway
  version: "${istio_version}"
  repo: https://istio-release.storage.googleapis.com/charts
  includeCRDs: true
  valuesFile: ./helm/eastwest-gateway-values.yaml
%{ endif }

%{ if istio_enable_private_northsouth_gateway }
- name: gateway
  namespace: istio-system
  releaseName: private-northsouth-gateway
  version: "${istio_version}"
  repo: https://istio-release.storage.googleapis.com/charts
  includeCRDs: true
  valuesFile: ./helm/private-northsouth-igw-values.yaml
%{ endif }


resources:
- namespace.yaml
- intermediate-ca.yaml
- jobs.yaml
- wildcard-external.yaml
- wildcard-internal.yaml
- eastwest-gw.yaml
